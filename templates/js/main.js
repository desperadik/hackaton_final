!function(){function o(t,n){return fetch(t).then(function(t){return t.json()})}function c(){var t=document.querySelectorAll("select");o("http://tested.owap.su/api/professions").then(function(t){a=t}),t.forEach(function(n){var t=n.getAttribute("name"),e=document.querySelector("input[name=profession]")||!1;switch(t){case"region":o("http://tested.owap.su/api/regions").then(function(t){n.innerHTML="",t.forEach(function(t){n.innerHTML+="<option value='".concat(t.name,"'>").concat(t.name,"</option>")})});break;case"profile":o("http://tested.owap.su/api/orientations").then(function(t){n.innerHTML="",t.forEach(function(t){n.innerHTML+="<option value='".concat(t.name,"'>").concat(t.name,"</option>")})});break;case"education":o("http://tested.owap.su/api/education_types").then(function(t){n.innerHTML="",t.forEach(function(t){n.innerHTML+="<option value='".concat(t.name,"'>").concat(t.name,"</option>")})})}!1!==e&&e.addEventListener("input",function(t){var n=t.target.value;if(3<=n.length)a.filter(function(t){return t.name.slice(0,n.length).toLowerCase()==n.toLowerCase()}).map(function(t){return"<span>".concat(t.name,"</span>")})})})}var a;document.addEventListener("DOMContentLoaded",c);function t(t){t.preventDefault(),o("http://tested.owap.su/api/data/?region_id=66&educationtype_id=1").then(function(t){var e=document.querySelector("main");e.innerHTML='<table>\n      <tr>\n        <td class="prof-display" data-profid="'.concat(t[0].profession_id,'">').concat(t[0].profession_name,"</td><td>").concat(t[0].rating,'%</td>\n      </tr>\n      <tr>\n      <td class="prof-display" data-profid="').concat(t[1].profession_id,'">').concat(t[1].profession_name,"</td><td>").concat(t[1].rating,'%</td>\n    </tr>\n    <tr>\n    <td class="prof-display" data-profid="').concat(t[2].profession_id,'">').concat(t[2].profession_name,"</td><td>").concat(t[2].rating,'%</td>\n  </tr>\n  <tr>\n  <td class="prof-display" data-profid="').concat(t[3].profession_id,'">').concat(t[3].profession_name,"</td><td>").concat(t[3].rating,'%</td>\n</tr>\n<tr>\n<td class="prof-display" data-profid="').concat(t[4].profession_id,'">').concat(t[4].profession_name,"</td><td>").concat(t[4].rating,"%</td>\n</tr>\n      </table>\n      <ol>").concat(t.map(function(t){return'<li class="prof-display" data-profid="'.concat(t.profession_id,'">').concat(t.profession_name," ").concat(t.salary,"р</li>")}).join(""),"</ol>"),document.querySelectorAll(".prof-display").forEach(function(n){var t=n.getAttribute("data-profid");n.addEventListener("click",function(){o("http://tested.owap.su/api/data_trend/?profession_id=".concat(t,"&education_id=1")).then(function(t){console.log(t),e.innerHTML="".concat(n.textContent,", рейтинг: ").concat(t[0].rating,"%")})})})})}var i=!1;document.addEventListener("DOMContentLoaded",function(){document.querySelector("button[type=submit]").addEventListener("click",t)}),window.showTopProf=t,window.changeService=function(t,n,e){if(!0!==i){var o=document.querySelector(e),a=t.target;a.classList.contains("active")||(i=!0,o.innerHTML="<div class='loader'></div>",document.querySelectorAll(".service-option").forEach(function(t){t.classList.contains("active")&&t.classList.remove("active")}),a.classList.add("active"),fetch("".concat(n,".html")).then(function(t){return t.text()}).then(function(t){return setTimeout(function(){i=!1,o.innerHTML=t,c()},500)}))}}}();